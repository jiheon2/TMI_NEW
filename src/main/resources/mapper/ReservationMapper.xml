<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kopo.poly.persistance.mapper.IReservationMapper">
    <!-- 예약 일정 등록 쿼리 -->
    <insert id="insertReservationInfo" parameterType="ReservationDTO">
        INSERT INTO RESERVATION (TRADER_NAME, CUSTOMER_NAME, RESERVATION_CONTENTS, RESERVATION_PRICE, RESERVATION_DATE)
        VALUES (#{traderName}, #{customerName}, #{reservationContents}, #{reservationPrice}, #{reservationDate})
    </insert>

    <!-- 예약 목록 조회 쿼리 -->
    <select id="getReservationList" resultType="ReservationDTO">
        SELECT RESERVATION_NUMBER, TRADER_NAME, CUSTOMER_NAME, RESERVATION_CONTENTS, RESERVATION_PRICE, RESERVATION_DATE
        FROM RESERVATION
        ORDER BY RESERVATION_NUMBER DESC
    </select>

    <!-- 당일 예약 목록 조회 쿼리 -->
    <select id="getTodayReservationList" parameterType="ReservationDTO" resultType="ReservationDTO">
        SELECT RESERVATION_NUMBER, TRADER_NAME, CUSTOMER_NAME, RESERVATION_CONTENTS, RESERVATION_PRICE, RESERVATION_DATE
        FROM RESERVATION
        WHERE RESERVATION_DATE = #{reservationDate}
    </select>

    <!-- 예약 상세정보 조회 쿼리 -->
    <select id="getReservationInfo" resultType="ReservationDTO">
        SELECT RESERVATION_NUMBER, TRADER_NAME, CUSTOMER_NAME, RESERVATION_CONTENTS, RESERVATION_PRICE, RESERVATION_DATE
        FROM RESERVATION
        WHERE RESERVATION_NUMBER = #{reservationNumber}
    </select>

    <!-- 예약 수정 쿼리 -->
    <update id="updateReservationInfo" parameterType="ReservationDTO">
        UPDATE RESERVATION SET
                               CUSTOMER_NAME = #{customerName},
                               RESERVATION_CONTENTS = #{reservationContents},
                               RESERVATION_PRICE = #{reservationPrice},
                               RESERVATION_DATE = #{reservationDate}
        WHERE
            RESERVATION_NUMBER = #{reservationNumber}
    </update>

    <!-- 예약 일정 삭제 쿼리 -->
    <delete id="deleteReservationInfo" parameterType="ReservationDTO">
        DELETE FROM RESERVATION
        WHERE RESERVATION_NUMBER = #{reservationNumber}
    </delete>
</mapper>